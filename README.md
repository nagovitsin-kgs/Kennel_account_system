# Итоговая контрольная работа

## Информация о проекте

Необходимо организовать систему учета для питомника в котором живут домашние и Pack animals.

## Как сдавать проект

Для сдачи проекта необходимо создать отдельный общедоступный репозиторий(Github, gitlub, или Bitbucket). Разработку вести в этом репозитории, использовать пул реквесты на изменения. Программа должна запускаться и работать, ошибок при выполнении программы быть не должно. Программа, может использоваться в различных системах, поэтому необходимо разработать класс в виде конструктора.

## Задание

## Операционные системы и виртуализация (Linux)

1. Использование команды cat в Linux

    - Создать два текстовых файла: "Pets"(Домашние животные) и "Pack animals"(вьючные животные), используя команду `cat` в терминале Linux.
      В первом файле перечислить собак, кошек и хомяков.
      Во втором — лошадей, верблюдов и ослов.
    - Объединить содержимое этих двух файлов в один и просмотреть его содержимое.
    - Переименовать получившийся файл в "Human Friends"(.
    - Пример конечного вывода после команды “ls”:

        Desktop Documents Downloads HumanFriends.txt Music PackAnimals.txt Pets.txt Pictures Videos

Команда cat в Linux используется для чтения, создания и объединения файлов. Она позволяет
просматривать содержимое файлов, а также выводить их на экран или записывать в другие
файлы.
Для решения поставленной задачи нам потребуется выполнить несколько шагов:

1. Создание двух текстовых файлов "Pets" и "Pack animals". Для этого используем команду `cat`
   с символом `>` для перенаправления вывода в файл. В терминале Linux выполняем
   следующие команды:

```
cat > Pets.txt
```

После выполнения данной команды терминал переводится в режим ввода. Перечислим в
нем домашних животных (собак, кошек и хомяков), каждый на новой строке. После ввода
всех животных нажимаем `Ctrl + D`, чтобы завершить режим ввода и создать файл.
Аналогичным образом создаем файл "PackAnimals.txt":

```
cat > PackAnimals.txt
```

Вводим в него список вьючных животных (лошадей, верблюдов и ослов), каждый на новой
строке. Завершаем режим ввода, нажимая `Ctrl + D`.

2. Объединение содержимого двух файлов в один. Для этого используем команду `cat` с
   символом `>>` для добавления содержимого в файл. Выполняем следующую команду:

```
cat Pets.txt >> PackAnimals.txt
```

Эта команда добавит содержимое файла "Pets.txt" в конец файла "PackAnimals.txt". Теперь
файл "PackAnimals.txt" содержит все животных из обоих файлов.

3. Просмотр содержимого объединенного файла. Для этого снова используем команду `cat`:

```
cat PackAnimals.txt
```

Эта команда выведет на экран содержимое файла "PackAnimals.txt", в котором содержатся все
животные.

4. Переименование файла "PackAnimals.txt" в "HumanFriends.txt". Для этого используем
   команду `mv` (от англ. "move") с указанием старого имени файла и нового имени:

```
mv PackAnimals.txt HumanFriends.txt
```

Теперь файл "PackAnimals.txt" называется "HumanFriends.txt".
После выполнения всех этих шагов, при выполнении команды `ls` выведется список файлов и
папок в текущей директории:

```
HumanFriends.txt  Pets.txt
```

Здесь "HumanFriends.txt" и "Pets.txt" - это созданные нами текстовые файлы, а остальные
элементы списка - это другие файлы и папки в текущей директории.

![Task 1](/Task1.png)

2. Работа с директориями в Linux
    - Создать новую директорию и переместить туда файл "Human Friends".

![Task 2](/Task2.png)

3. Работа с MySQL в Linux.

    - Установить MySQL на вашу вычислительную машину.
    - Подключить дополнительный репозиторий MySQL и установить один из пакетов из этого репозитория.

![Task 3](/Task3.png)

4. Управление deb-пакетами.
    - Установить и затем удалить deb-пакет, используя команду `dpkg`.

Установка и удаление deb-пакетов является одной из основных задач в Linux. Для этого
существует утилита dpkg. В данном ответе будет рассмотрено, как установить и удалить debпакеты с помощью dpkg.
Deb-пакеты являются основным форматом пакетов в Debian и его производных
дистрибутивах, таких как Ubuntu. Они содержат программные компоненты, такие как
исполняемые файлы, скрипты установки и другие файлы, необходимые для установки
программного обеспечения.
Прежде чем начать, необходимо убедиться, что у вас есть права суперпользователя или вы
можете выполнить команды с использованием sudo.
Установка deb-пакета с помощью dpkg выполняется следующей командой:

```
sudo dpkg -i имя_файла.deb
```

Где имя_файла.deb - это имя файла deb-пакета, который вы хотите установить.
После выполнения этой команды dpkg начнет процесс установки пакета. Он распакует файлы
в указанное место и выполнит необходимые действия, такие как обновление информации о
пакетах в системе.
Возможно, у вас могут возникнуть ошибки в процессе установки пакета. Они связаны с
зависимостями пакетов. Некоторые пакеты требуют наличия других пакетов для работы, и
если эти зависимости не будут выполнены, установка не будет успешной.
Чтобы устранить проблемы с зависимостями, можно использовать команду apt, чтобы
автоматически установить эти зависимости:

```
sudo apt -f install
```

Эта команда попытается установить все недостающие зависимости и зависимости,
несовместимые с уже установленными пакетами.
Чтобы удалить установленный deb-пакет, используйте команду:

```
sudo dpkg -r имя_пакета
```

Где имя_пакета - это имя установленного пакета, который вы хотите удалить.
Также можно использовать команду dpkg --purge для удаления deb-пакета вместе с его
конфигурационными файлами:

```
sudo dpkg --purge имя_пакета
```

Эта команда удалит все файлы, связанные с пакетом, и удалит его из системы.
Если у вас есть deb-пакет, необходимо установить, или вы хотите удалить пакет, уже
установленный на вашей системе, вы можете использовать dpkg для этого. Он предоставляет
простой и эффективный способ управления deb-пакетами в Linux.

![Task 4](/Task4.png)

5. История команд в терминале Ubuntu.
    - Сохранить и выложить историю ваших терминальных команд в Ubuntu.
    - В формате: Файла с ФИО, датой сдачи, номером группы(или потока).

Хранение истории команд в терминале Ubuntu обеспечивается специальным файлом под названием .bash_history.

Данный файл сохраняет список последних выполненных команд,
позволяя пользователям легко получить доступ к ранее введенным командам и повторно использовать их. Файл .bash_history располагается в домашнем каталоге пользователя (~/.bash_history).

Для просмотра истории команд в терминале Ubuntu можно воспользоваться командой history.

Эта команда отображает список выполненных команд, пронумерованных по порядку.

При этом каждая команда представлена своим номером, что позволяет быстро найти нужную команду.

Также возможно использовать сочетание клавиш Ctrl+R для поиска команд в истории. При вводе этого сочетания клавиш пользователь может начать набирать часть команды, и терминал автоматически предложит наиболее подходящую команду из истории.

Для сохранения истории команд в файл можно использовать переменную окружения HISTFILE.

В стандартной конфигурации Ubuntu переменная HISTFILE установлена в значение ~/.bash_history.

Однако пользователь может изменить это значение, например, на
/path/to/my_history_file, чтобы сохранять историю в другом файле.

В файле .bash_history команды сохраняются в простом текстовом формате в виде последовательности строк.

Каждая строка содержит одну команду, записанную в ней в том виде, в котором она была введена пользователем.

Историю команд можно очистить с помощью команды history -c. Эта команда удаляет все команды из истории. После очистки истории команды не удаляются физически из файла .bash_history, а просто перестают отображаться при использовании команды history.

Вижу, что в задании требуется сохранить и выложить историю команд в терминале Ubuntu.

Однако, из-за соображений конфиденциальности, сохранение и предоставление моего личного файла .bash_history невозможно. Каждый пользователь Ubuntu имеет свой уникальный .bash_history, в котором содержатся его персональные команды.

Учитывая эти ограничения, могу предложить вам следующий вариант.

Мы можем самостоятельно сохранить историю команд в файл, а затем предоставить онлайн ссылку на этот файл.

Для сохранения истории команд в файл можно использовать следующую команду:

    history > history.txt

Эта команда сохраняет историю команд в файл с названием history.txt. После выполнения этой команды в текущем каталоге будет создан файл history.txt, в котором будут записаны все команды из истории терминала.

После сохранения истории команд в файл, вы можете загрузить этот файл на платформу, которая позволяет загружать и пересылать файлы, и предоставить мне ссылку на скачивание.

Таким образом, мы сможем ознакомиться с нашей историей команд в терминале Ubuntu.

[Task 5 - ссылка на историю команд: Наговицин Алексей Васильевич, 23.12.2023, специализация программирование.](/history.txt.txt)

## Объектно-ориентированное программирование

6. Диаграмма классов
    - Создать диаграмму классов с родительским классом "Животные", и двумя подклассами: "Pets" и "Pack animals".
    - В составы классов которых в случае Pets войдут классы: собаки, кошки, хомяки, а в класс Pack animals войдут: Лошади, верблюды и ослы).
      Каждый тип животных будет характеризоваться (например, имена, даты рождения, выполняемые команды и т.д)
      Диаграмму можно нарисовать в любом редакторе, такими как Lucidchart, Draw.io, Microsoft Visio и других.

[UML.drawio](/UML.drawio)

7. Работа с MySQL.

7.1. После создания диаграммы классов в 6 пункте, в 7 пункте база данных "Human Friends" должна быть структурирована в соответствии с этой диаграммой.

Например, можно создать таблицы, которые будут соответствовать классам "Pets" и "Pack animals", и в этих таблицах будут поля, которые характеризуют каждый тип животных (например, имена, даты рождения, выполняемые команды и т.д.).

7.2 - В ранее подключенном MySQL создать базу данных с названием "Human Friends".

-   Создать таблицы, соответствующие иерархии из вашей диаграммы классов.
-   Заполнить таблицы данными о животных, их командах и датами рождения.
-   Удалить записи о верблюдах и объединить таблицы лошадей и ослов.
-   Создать новую таблицу для животных в возрасте от 1 до 3 лет и вычислить их возраст с точностью до месяца.
-   Объединить все созданные таблицы в одну, сохраняя информацию о принадлежности к исходным таблицам.

```sql
-- создание БД
DROP DATABASE IF EXISTS human_friends;
CREATE DATABASE human_friends;

-- подключение к БД
USE human_friends;

-- Создать таблицы, соответствующие иерархии из вашей диаграммы классов.
CREATE TABLE animal_classes
(
	Id INT AUTO_INCREMENT PRIMARY KEY,
	Class_name VARCHAR(20)
);

INSERT INTO animal_classes (Class_name)
VALUES ('вьючные'),
('домашние');

CREATE TABLE pack_animals
(
	Id INT AUTO_INCREMENT PRIMARY KEY,
    Genus_name VARCHAR (20),
    Class_id INT,
    FOREIGN KEY (Class_id) REFERENCES animal_classes (Id) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO pack_animals (Genus_name, Class_id)
VALUES ('Лошади', 1),
('Ослы', 1),
('Верблюды', 1);

CREATE TABLE pets
(
	Id INT AUTO_INCREMENT PRIMARY KEY,
    Genus_name VARCHAR (20),
    Class_id INT,
    FOREIGN KEY (Class_id) REFERENCES animal_classes (Id) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO pets (Genus_name, Class_id)
VALUES ('Кошки', 2),
('Собаки', 2),
('Хомяки', 2);

CREATE TABLE cats
(
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(20),
    Birthday DATE,
    Commands VARCHAR(50),
    Genus_id int,
    Foreign KEY (Genus_id) REFERENCES pets (Id) ON DELETE CASCADE ON UPDATE CASCADE
);
```

```sql
-- Заполнить таблицы данными о животных, их командах и датами рождения
INSERT INTO cats (Name, Birthday, Commands, Genus_id)
VALUES ('Пупа', '2011-01-01', 'кс-кс-кс', 1),
('Олег', '2016-01-01', "отставить!", 1),
('Тьма', '2017-01-01', "", 1);

CREATE TABLE dogs
(
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(20),
    Birthday DATE,
    Commands VARCHAR(50),
    Genus_id int,
    Foreign KEY (Genus_id) REFERENCES pets (Id) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO dogs (Name, Birthday, Commands, Genus_id)
VALUES ('Дик', '2020-01-01', 'ко мне, лежать, лапу, голос', 2),
('Граф', '2021-06-12', "сидеть, лежать, лапу", 2),
('Шарик', '2018-05-01', "сидеть, лежать, лапу, след, фас", 2),
('Босс', '2021-05-10', "сидеть, лежать, фу, место", 2);

CREATE TABLE hamsters
(
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(20),
    Birthday DATE,
    Commands VARCHAR(50),
    Genus_id int,
    Foreign KEY (Genus_id) REFERENCES pets (Id) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO hamsters (Name, Birthday, Commands, Genus_id)
VALUES ('Малой', '2020-10-12', '', 3),
('Медведь', '2021-03-12', "атака сверху", 3),
('Ниндзя', '2022-07-11', NULL, 3),
('Бурый', '2022-05-10', NULL, 3);

CREATE TABLE horses
(
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(20),
    Birthday DATE,
    Commands VARCHAR(50),
    Genus_id int,
    Foreign KEY (Genus_id) REFERENCES pack_animals (Id) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO horses (Name, Birthday, Commands, Genus_id)
VALUES ('Гром', '2020-01-12', 'бегом, шагом', 1),
('Закат', '2017-03-12', "бегом, шагом, хоп", 1),
('Байкал', '2016-07-12', "бегом, шагом, хоп, брр", 1),
('Молния', '2020-11-10', "бегом, шагом, хоп", 1);

CREATE TABLE donkeys
(
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(20),
    Birthday DATE,
    Commands VARCHAR(50),
    Genus_id int,
    Foreign KEY (Genus_id) REFERENCES pack_animals (Id) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO donkeys (Name, Birthday, Commands, Genus_id)
VALUES ('Первый', '2019-04-10', NULL, 2),
('Второй', '2020-03-12', "", 2),
('Третий', '2021-07-12', "", 2),
('Четвертый', '2022-12-10', NULL, 2);

CREATE TABLE camels
(
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(20),
    Birthday DATE,
    Commands VARCHAR(50),
    Genus_id int,
    Foreign KEY (Genus_id) REFERENCES pack_animals (Id) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO camels (Name, Birthday, Commands, Genus_id)
VALUES ('Горбатый', '2022-04-10', 'вернись', 3),
('Самец', '2019-03-12', "остановись", 3),
('Сифон', '2015-07-12', "повернись", 3),
('Борода', '2022-12-10', "улыбнись", 3);
```

```sql
-- Удалить записи о верблюдах и объединить таблицы лошадей и ослов.
SET SQL_SAFE_UPDATES = 0;
DELETE FROM camels;

SELECT Name, Birthday, Commands FROM horses
UNION SELECT  Name, Birthday, Commands FROM donkeys;
```

```sql
-- Создать новую таблицу для животных в возрасте от 1 до 3 лет и вычислить их возраст с точностью до месяца.
CREATE TEMPORARY TABLE animals AS
SELECT *, 'Лошади' AS genus FROM horses
UNION SELECT *, 'Ослы' AS genus FROM donkeys
UNION SELECT *, 'Собаки' AS genus FROM dogs
UNION SELECT *, 'Кошки' AS genus FROM cats
UNION SELECT *, 'Хомяки' AS genus FROM hamsters;

CREATE TABLE yang_animal AS
SELECT Name, Birthday, Commands, genus, TIMESTAMPDIFF(MONTH, Birthday, CURDATE()) AS Age_in_month
FROM animals WHERE Birthday BETWEEN ADDDATE(curdate(), INTERVAL -3 YEAR) AND ADDDATE(CURDATE(), INTERVAL -1 YEAR);

SELECT * FROM yang_animal;
```

```sql
-- Объединить все созданные таблицы в одну, сохраняя информацию о принадлежности к исходным таблицам.
SELECT h.Name, h.Birthday, h.Commands, pa.Genus_name, ya.Age_in_month
FROM horses h
LEFT JOIN yang_animal ya ON ya.Name = h.Name
LEFT JOIN pack_animals pa ON pa.Id = h.Genus_id
UNION
SELECT d.Name, d.Birthday, d.Commands, pa.Genus_name, ya.Age_in_month
FROM donkeys d
LEFT JOIN yang_animal ya ON ya.Name = d.Name
LEFT JOIN pack_animals pa ON pa.Id = d.Genus_id
UNION
SELECT c.Name, c.Birthday, c.Commands, ha.Genus_name, ya.Age_in_month
FROM cats c
LEFT JOIN yang_animal ya ON ya.Name = c.Name
LEFT JOIN pets ha ON ha.Id = c.Genus_id
UNION
SELECT d.Name, d.Birthday, d.Commands, ha.Genus_name, ya.Age_in_month
FROM dogs d
LEFT JOIN yang_animal ya ON ya.Name = d.Name
LEFT JOIN pets ha ON ha.Id = d.Genus_id
UNION
SELECT hm.Name, hm.Birthday, hm.Commands, ha.Genus_name, ya.Age_in_month
FROM hamsters hm
LEFT JOIN yang_animal ya ON ya.Name = hm.Name
LEFT JOIN pets ha ON ha.Id = hm.Genus_id;
```

8.  ООП и Java

    -   Создать иерархию классов в Java, который будет повторять диаграмму классов созданную в задаче 6 (Диаграмма классов).

9.  Программа-реестр домашних животных

-   Написать программу на Java, которая будет имитировать реестр домашних животных.
    Должен быть реализован следующий функционал:

        9.1. Добавление нового животного
            - Реализовать функциональность для добавления новых животных в реестр.

    Животное должно определяться в правильный класс (например, "собака", "кошка", "хомяк" и т.д.)

        9.2. Список команд животного
            - Вывести список команд, которые может выполнять добавленное животное (например, "сидеть", "лежать").

        9.3. Обучение новым командам
            - Добавить возможность обучать животных новым командам.
        9.4 Вывести список животных по дате рождения

        9.5. Навигация по меню
            - Реализовать консольный пользовательский интерфейс с меню для навигации между вышеуказанными функциями.

10. Счетчик животных
    Создать механизм, который позволяет вывести на экран общее количество созданных животных любого типа (Как домашних, так и вьючных), то есть при создании каждого нового животного счетчик увеличивается на “1”.

[Task 8, 9, 10 - программа на Java](/src/Program.java)
